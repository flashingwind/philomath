# 大西『論理学』 I部 計算と表現

## 2章 古典命題論理(2)――論理の妥当性

### 2.0 (イントロダクション)

- 推論の妥当性の定義を与える
- 推論の妥当性の機械的な証明方法(アルゴリズム)を紹介
- 典型的な法則，誤謬を紹介

### 2.1 妥当性

《この定義をいきなり読むのは困難だと思うので……。》

1. **推論**はいくつかの**前提**(論理式)$B_1,......,B_N$と**推論**(論理式)$A$で表現できる
1. **妥当な**推論とは「前提が真ならば結論は偽ではあり得ない」ような推論
1. ⇔妥当では**ない**推論とは:「前提が真で，1つ以上の結論が偽」反例がある
1. 「前提($B_i$)がすべて1で，かつ結論($A$)が0となる」ようなモデル$v$をその推論の**反例モデル**とよぶことにする。(p.22■妥当性の判定方法より)
1. 反例モデルが1つも存在しない推論は**妥当**
1. 証明の手続き上は，反例モデルを仮定し，矛盾が起きるか確認する
1. ※$X=\{B_1,……,B_N\}$は$N$個の前提$B_i$の集合
1. ※$\{A\}$は結論$A$ひとつからなる集合

実際にどのように使うか。

###### 定義1 (妥当性)

> $X\cup\{A\}$を古典命題論理の論理式の集合とする。**ある**付値$v$が
$$すべてのB\in{}Xについてv(B)=1, かつv(A)=0$$
を満たすとき，$v$を前提$X$から結論$A$への推論に対する判例モデルと呼ぶ。
> すなわち，**任意の《すべての》**付値$v$について，
$$すべてのB\in{}Xについてv(B)=1ならば, v(A)=1$$
が成り立つとき，前提$X$から結論$A$への推論が**妥当**である，あるいは$X$から$A$が**帰結**すると言い，$$X\vDash{}A$$と書く。
>
> 推論が妥当ではないとき(反例モデルが存在するとき)は$X\not\vDash{}A$と書く。

- ※「$\{前提,……,前提\}\vDash{}要素$」が原則だけど，以降では{……}を省略し，「$前提,……,前提\vDash{}要素$」と書く

###### 例1 $p\rightarrow{}q, q\rightarrow{}r \vDash p\rightarrow{}r$が成り立つことを証明する

- 前提($X$): $\{p\rightarrow{}q, q\rightarrow{}r\}$
- 結論($A$): $p\rightarrow{}r$

に対応する。

**分析的反証法**を使う。反例モデルを仮定して真理値が矛盾しないかしらべる。

1. 《proof》反例モデルを仮定する:
    - $v(p→q)=1，v(q→r)=1，v(p→r)=0$が同時に成り立つようなモデルvが選べる(存在する)。
    - ※本来，各命題が各々独立ならvを適切に選べば任意の真理値をつけられるが，このように同じ文字が入っていると，そういう世界/状況$v$が「存在しえない」こともある。
2. 3番目の条件を前章定義6のルールで分解する:
    $$v(p→r)=0　⇔　v(p)=1かつv(r)=0$$
3. $⇒v(p)=1$
4. 同様に1番目を分解する。
    $$v(p→q)=1　⇔　v(p)=0または(q)=1$$
5. 1〜2のルートと4のルートを合流させる:
    $$v(p)\neq{}0だから，v(q)=1である。$$
6. 同様に2番目を分解する:
    $v(q→r)=1$　⇔　$v(q)=0またはv(r)=1$
7. 5のルートでは$v(r)=0$が導びかれたが，1〜4のルートからは$v(r)=1$が導かれた。
8. 矛盾するので，仮説は成り立たない。
9. 反例モデルが成り立つ付値v(3つの条件は同時に成り立たつ状況・世界)は存在しない。
10. 定義1より，元の推論は妥当。《QED.》

###### 例2 非妥当の例

《省略》反例モデルの仮定して，左側は2段階に，右は1段階分解して$v(p)，v(q)，v(r)$にしたあと，右辺から得た条件を左辺に適用して矛盾しなければ，元の推論の非妥当が証明できる。

### 1.2 決定可能性

「推論の計算」

- アルゴリズム: 機械的な手順(演算，置き換え，繰り返し，ルールベースの判断などを含む)
  - ※コンピューターのが後で出てきた。「機械」というのは仮想的なものだった

- 計算可能: 常に正しい解答を出すアルゴリズムが存在
- 決定問題: 答えがyes/noな問題
  - ある推論が妥当か？は決定問題
  - 計算可能な決定問題: 決定可能という

- ある推論が妥当か？判定するアルゴリズム:
  - 分析的反証法
  - タブロー法
  - 真理値表
  - (証明論的な手法)

##### 定理1 古典命題論理の推論は決定可能

証明はしないが，

- 論理式で書ける
- 有限性がある
  - 命題変項と演算子の個数(複雑さ)が有限

そもそも「思考を計算したい」というモチベーションだったので，それはある程度実現されている。

#### 1.2.3 いくつかのトピック

##### 1.2.3.1 形式妥当性

「妥当な推論」から「妥当な推論の形式」へ

- 命題変項: $p, q$
- 論理式: $A, B, C$……命題変項，命題変項を組み合わせたもの

推論の形式の妥当性を示す場合，命題変項だけでなくどんな論理式でもかまわない場合は$A, B, C$を使用する。

以下ではいくつかの例を示す。

##### 1.2.3.2 トートロジー

結論にもってきたとき常に推論が妥当になる結論$A$の形式をトートロジーという。

前提がなんでもいい(前提$B_i$の条件がない)ことをの空集合$\phi$で表し，

$$\phi\vDash{}A$$

と定義される。

###### 問題2 (トートロジーの典型)

トートロジーであることを示すには結論に影響する$v(A)，v(B)$などがなんであっても，常に$v(問題の命題)=1$であることを示せばよい。アルゴリズムはどれでもよいが，引数となる論理式が少ないので真理値表を書いた。

《このような操作は，単純なものであればプログラミングするとき脳内で自然にやっていると思います》

(1) $v(A\lor\neg{}A)=1$を示す

0. 出てくる文字$A$，$B$，……を確認する
1. $A$，$B$，……のすべての組み合わせを左側に書く
2. 右から左に，演算子のところで結論を分解
3. この場合は仮定と，仮定からすぐに計算可能な論理式が出てきたので分解は終了
4. 2列目から(定義通りに)右方向に計算して，表を埋める
5. どんな値を仮定しても1なので，トートロジー

| 仮定: $v(A)$   | $v(\neg{}A)$| 結論:$v(A\;or\neg{}A)$ |
|----------|-------------|-------------------|
| 0        | 1           | 1                 |
| 1        | 0           | 1                 |

(2) $v(\neg{}(A\land\neg{}A))=1$を示す

| 仮定:$v(A)$   | $v(\neg{}A)$| $v(A\land\neg{}A)$ | 結論:$v(\neg{}(A\land{}\neg{}A))$ |
|----------|-------------|-------------------|---------------------------|
| 0        | 1           | 0                 | 1                         |
| 1        | 0           | 0                 | 1                         |

(3) $v((A\rightarrow{}B)\lor(B\rightarrow{}A))=1$を示す

2変数になると行が増える。

|仮定: $v(A)$|仮定: $v(B)$| $v(A\rightarrow{}B)$ | $v(B\rightarrow{}A)$ | 結論: $v((A\rightarrow{}B)\lor(B\rightarrow{}A))$ |
|-------------|-------------|-----------------------|----------------------|------------------------------------------|
| 0           | 0           | 1                     | 1                    | 1                    |
| 0           | 1           | 1                     | 0                    | 1                    |
| 1           | 0           | 0                     | 1                    | 1                    |
| 1           | 1           | 1                     | 1                    | 1                    |

(4) $v(((A\rightarrow{}B)\rightarrow{}A)\rightarrow{}A)=1$を示す

1. 5列目を外側から4列目と1列目($A$)に分解。
2. 4列目→3列目，1列目($A$)。
3. 3列目→2列目，1列目($A$)。

|仮定: $v(A)$|仮定: $v(B)$|$v(A\rightarrow{}B)$|$v((A\rightarrow{}B)\rightarrow{}A)$| 結論: $v(((A\rightarrow{}B)\rightarrow{}A)\rightarrow{}A)$|
|------------|-----------|--------------------|----------------------|------------------------------------------|
| 0          | 0         | 1                  | 0                    | 1                    |
| 0          | 1         | 1                  | 0                    | 1                    |
| 1          | 0         | 0                  | 1                    | 1                   |
| 1          | 1         | 1                  | 1                    | 1                    |

##### 1.2.3.3 代表的な論理法則の表現

伝統的に知られている妥当な推論の形式が，古典命題論理でも妥当になることを示す。

※今回最初に説明したとおり，前提のカンマ(，)は$\{B_1,……,B_N\}$の省略記法なので。「前提がすべて1のときは，結論も1」と読んでください:
$$\{B_1, B_2,……\}\vDash{}A$$
$$\Leftrightarrow$$
$$v(B_1)=1かつv(B_2)=1かつ……のときv(A)=1である。$$

###### ■ドモルガンの法則

《実際には$前提\Leftrightarrow結論$も成り立ちます。工学系の論理学(ブール代数)ではよく憶えさえられるので，例として提示します》

|$v(A)$|$v(B)$| $v(A\land{}B)$|仮定: $v(\neg(A\land{}B))$|$v(\neg{}A)$|$v(\neg{}A)$| 結論: $v(\neg{}A\lor\neg{}B)$|
|------|------|---------------|-------------------------|------------|------------|------------------------------|
| 0    | 0    | 0             | 1                       | 1          | 1          | 1                            |
| 0    | 1    | 0             | 1                       | 1          | 0          | 1                            |
| 1    | 0    | 0             | 1                       | 0          | 1          | 1                            |
| 1    | 1    | 1             | 0                       | 0          | 0          | 0                            |

バリエーション:

- $\neg(A\land{}B) \Leftrightarrow \neg{}A\lor\neg{}B$ (上記)
- $\neg(A\lor{}B) \Leftrightarrow \neg{}A\land\neg{}B$

$\neg$は分配法則が成り立たないので，そのかわりに。$\neg$が二重にでかかっているとき。ORをANDにしたいときなど。

- 例: $\neg(\neg{}A\lor{}B) \Leftrightarrow \neg\neg{}A\land\neg{}B \Leftrightarrow A\land\neg{}B$

##### 1.2.3.4 代表的な論理的な誤謬の表現

###### ■前件否定の誤謬 $A\rightarrow{}B, \neg{}A \not\vDash \neg{}B$

「$\rightarrow$」の性質より$A\rightarrow{}B=\neg{}A\lor{}B$と変形できるので，$B$か$\neg{}B$が前提として与えられないと決定できず，前提が足りません。$v(結論)$は0か1か不確定です。$v(B)$によります。

###### ■後件肯定の誤謬 $A\rightarrow{}B, B \not\vDash A$

同様に$\neg{}A\lor{}B$と変形できるので，$v(A)$は0か1か不確定です。

##### 1.2.3.5 実質含意のパラドックス

ここまで使ってきた「→」を実質含意と呼ぶ。
この演算子には特有の問題があり，「実質含意のパラドックス」と呼ばれる。

次章以降でネタになるのでちょっと説明しておく。

$$v(A\rightarrow{}B) \Leftrightarrow v(A)=0またはv(B)=1 \Leftrightarrow v(\neg{}A\lor{}B)$$

という性質がある。論理学は推論の妥当性を与えることが目的だったが，この「→」のせいで「私たちが素直には認めたくない」ような推論も妥当と判定してしまう。

**非古典論理**: 妥当性のよりよい基準を求めようとする。次回以降。

#### 1.2.3.6 ケーススタディ2 タブロー法

- 図上の操作で論理を分析する。
- 縦につんだ場合は「かつ」
- 枝にわかれている場合は「または」とする
- (ちょっと説明が足りない気がするが)ぶらさげる場所は，先端でかまわない。同じレベルで複数ある場合はそれぞれに。

#### 1.2.3.6 アクティブラーニング

##### 文字列解釈のアルゴリズム

- 値の計算の優先順位が一番最後になる演算子: 主演算子
- 文字数が有限なら，文字数の定数倍の手順で特定できるアルゴリズムが存在する

- 使用可能な文字をとりあえず限定する: $\{p, q,\neg , \lor ,\land, (,)\}$
- 全体が1文字ではないとする
- 無駄なカッコはないことにする
- $\lor ,\land$の優先順位は等しいので，$p\lor{}q\land{}r$のようなカッコなしの表記はない
- これにより下記のパターンに限定できる
  1. パターン1: 全体が$\neg{}p$または$\neg{}(………)$
  2. パターン2: 全体が$p\lor{}q$，$p\land{}q$
      - パターン2.1: さらに$p,q$を$\neg{}p$$\neg{}q$に置き換えたもの
      - パターン2.2: さらに$p,q$を$(……)$に置き換えたもの
  3. 全体として，最も複雑な場合でも$\neg{}(……)\lor{}\neg(……)$くらいの複雑さになると思う

アルゴリズムの例:

※実用的には関数電卓やプログラミング言語の計算などに似た処理ですが，そういうのははもうちょっとマジメにやる必要があります。

1. 基本的に左からスキャンする
    - $\neg{}((……)……(……)……)\lor{}\neg(……)$という式で例を示す
1.カッコの中身を捨てる。中身は無視できるので，左から1文字ずつ見て，"$($"をみつけた場合カッコ用カウンターをカウントアップ，"$)$"があればカウントダウンしながら読んだ文字を削除しつつ右に進む。カウンターがゼロになったら，その部分を新しい1文字$a$とか$b$とかで置き換える。右端まで処理する。終端まで行うとカッコがなくなる。
    - $\neg{}a\lor{}\neg{}b$
1.$\neg$は結合の優先順位が最も高い。したがって，もう一度左から見て，$\neg{}p$など「$\neg{}$+1文字」があれば新しい1文字$c$，$d$で置換する
    - $c\lor{}d$
1.この段階で，$p$，$p\lor{}q$，$p\land{}q$のどれかの形式だから
    - $\lor{}$，$\land{}$ならそれを出力
    - 1文字なら$\neg$を出力

みたいな感じで作ってみました。:[Colab](https://colab.research.google.com/drive/1r1c4HhpFaFQmDaimiFoUX4o3q_yp8QLE?usp=sharing)
